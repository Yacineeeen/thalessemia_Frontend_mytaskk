{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let UpdateirmcComponent = class UpdateirmcComponent {\n  constructor(IrmcoeurService, router, route) {\n    this.IrmcoeurService = IrmcoeurService;\n    this.router = router;\n    this.route = route;\n    this.ComplicationCoeur = {};\n    this.errorMessage = '';\n  }\n  ngOnInit() {\n    this.route.paramMap.subscribe(params => {\n      const PatientID = params.get('PatientID');\n      if (PatientID) {\n        const id = parseInt(PatientID, 10);\n        if (!isNaN(id)) {\n          this.getComplicationCoeurById(id);\n        } else {\n          console.error('Invalid patient ID:', PatientID);\n        }\n      } else {\n        console.error('Patient ID is missing in route');\n      }\n    });\n  }\n  getComplicationCoeurById(id) {\n    this.IrmcoeurService.getComplicationCoeurById(id).subscribe(data => {\n      this.ComplicationCoeur = data;\n      // Optionally log the data to ensure it's correctly set\n      console.log('Formatted data:', this.ComplicationCoeur);\n      this.ComplicationCoeur.dateEchocardiographie = this.formatDate(this.ComplicationCoeur.dateEchocardiographie);\n      console.log(\"testt date \");\n      console.log(this.ComplicationCoeur.dateEchocardiographie);\n    }, error => {\n      this.errorMessage = error.message;\n      console.error('Error fetching complication data:', error);\n    });\n  }\n  formatDate(dateString) {\n    const date = new Date(dateString);\n    const day = String(date.getDate()).padStart(2, '0');\n    const month = String(date.getMonth() + 1).padStart(2, '0'); // Months are 0-based\n    const year = date.getFullYear();\n    return `${year}-${month}-${day}`;\n  }\n  onSubmit() {\n    const patientID = parseInt(this.route.snapshot.paramMap.get('PatientID'), 10);\n    if (!isNaN(patientID)) {\n      this.coeurService.update(patientID, this.ComplicationCoeur).subscribe(response => {\n        console.log('Update successful', response);\n        //this.router.navigate(['/']); // Adjust this to your desired route after successful update\n      }, error => {\n        this.errorMessage = error.message;\n        console.error('Error updating complication data:', error);\n      });\n    } else {\n      console.error('Invalid patient ID:', patientID);\n    }\n  }\n};\nUpdateirmcComponent = __decorate([Component({\n  selector: 'app-updateirmc',\n  templateUrl: './updateirmc.component.html',\n  styleUrls: ['./updateirmc.component.css']\n})], UpdateirmcComponent);","map":{"version":3,"names":["Component","UpdateirmcComponent","constructor","IrmcoeurService","router","route","ComplicationCoeur","errorMessage","ngOnInit","paramMap","subscribe","params","PatientID","get","id","parseInt","isNaN","getComplicationCoeurById","console","error","data","log","dateEchocardiographie","formatDate","message","dateString","date","Date","day","String","getDate","padStart","month","getMonth","year","getFullYear","onSubmit","patientID","snapshot","coeurService","update","response","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\elabe\\Desktop\\ThalassemiaFront\\src\\app\\pages\\updateirmc\\updateirmc.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { IrmcoeurService } from 'src/app/services/irmcoeur.service';\r\n\r\n@Component({\r\n  selector: 'app-updateirmc',\r\n  templateUrl: './updateirmc.component.html',\r\n  styleUrls: ['./updateirmc.component.css']\r\n})\r\nexport class UpdateirmcComponent {\r\n  ComplicationCoeur: any= {};\r\n  errorMessage: string = '';\r\n\r\n  constructor(\r\n    private IrmcoeurService: IrmcoeurService,\r\n    private router: Router,\r\n    private route: ActivatedRoute\r\n  ) {}\r\n\r\n  \r\n  ngOnInit(): void {\r\n    this.route.paramMap.subscribe(params => {\r\n      const PatientID = params.get('PatientID');\r\n      if (PatientID) {\r\n        const id = parseInt(PatientID, 10);\r\n        if (!isNaN(id)) {\r\n          this.getComplicationCoeurById(id);\r\n        } else {\r\n          console.error('Invalid patient ID:', PatientID);\r\n        }\r\n      } else {\r\n        console.error('Patient ID is missing in route');\r\n      }\r\n    });\r\n  }\r\n  \r\n  \r\n  private getComplicationCoeurById(id: number) {\r\n    this.IrmcoeurService.getComplicationCoeurById(id).subscribe(\r\n      (data: ComplicationCoeur) => {\r\n        this.ComplicationCoeur = data;\r\n        // Optionally log the data to ensure it's correctly set\r\n        console.log('Formatted data:', this.ComplicationCoeur);\r\n        this.ComplicationCoeur.dateEchocardiographie = this.formatDate(this.ComplicationCoeur.dateEchocardiographie);\r\nconsole.log(\"testt date \");\r\n       console.log(this.ComplicationCoeur.dateEchocardiographie);\r\n      },\r\n      (error: HttpErrorResponse) => {\r\n        this.errorMessage = error.message;\r\n        console.error('Error fetching complication data:', error);\r\n      }\r\n    );\r\n  }\r\n  formatDate(dateString: string): string {\r\n    const date = new Date(dateString);\r\n    const day = String(date.getDate()).padStart(2, '0');\r\n    const month = String(date.getMonth() + 1).padStart(2, '0'); // Months are 0-based\r\n    const year = date.getFullYear();\r\n    return `${year}-${month}-${day}`;\r\n  }\r\n  \r\n  \r\n\r\n  onSubmit() {\r\n    const patientID = parseInt(this.route.snapshot.paramMap.get('PatientID')!, 10);\r\n    if (!isNaN(patientID)) {\r\n        this.coeurService.update(patientID, this.ComplicationCoeur).subscribe(\r\n            response => {\r\n                console.log('Update successful', response);\r\n                //this.router.navigate(['/']); // Adjust this to your desired route after successful update\r\n            },\r\n            (error: HttpErrorResponse) => {\r\n                this.errorMessage = error.message;\r\n                console.error('Error updating complication data:', error);\r\n            }\r\n        );\r\n    } else {\r\n        console.error('Invalid patient ID:', patientID);\r\n    }\r\n}\r\n\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}